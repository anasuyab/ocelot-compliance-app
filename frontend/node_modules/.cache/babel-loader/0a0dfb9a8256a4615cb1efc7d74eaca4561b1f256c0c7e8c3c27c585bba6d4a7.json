{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useCallback } from 'react';\nimport { complianceApi } from '../services/complianceApi';\nexport const useBlueprintAnalysis = () => {\n  _s();\n  const [status, setStatus] = useState('idle'); // idle, analyzing, complete, error\n  const [progress, setProgress] = useState(0);\n  const [result, setResult] = useState(null);\n  const [error, setError] = useState(null);\n  const startAnalysis = useCallback(async file => {\n    setStatus('analyzing');\n    setProgress(0);\n    setError(null);\n\n    // 1. Start the UI Simulation (The visual candy)\n    const progressInterval = setInterval(() => {\n      setProgress(prev => {\n        if (prev >= 90) return 90; // Stall at 90% until API finishes\n        return prev + 10;\n      });\n    }, 400);\n    try {\n      // 2. Make the actual API Call\n      const data = await complianceApi.analyzeBlueprint(file);\n\n      // 3. When API finishes successfully:\n      clearInterval(progressInterval);\n      setProgress(100);\n      setResult(data);\n\n      // Small delay to let the user see \"100%\" before switching screens\n      setTimeout(() => {\n        setStatus('complete');\n      }, 500);\n    } catch (err) {\n      clearInterval(progressInterval);\n      setError(err.message);\n      setStatus('error');\n    }\n  }, []);\n  const resetAnalysis = useCallback(() => {\n    setStatus('idle');\n    setProgress(0);\n    setResult(null);\n    setError(null);\n  }, []);\n  return {\n    status,\n    progress,\n    result,\n    error,\n    startAnalysis,\n    resetAnalysis\n  };\n};\n_s(useBlueprintAnalysis, \"/T7/DoCn/UOrtGWkqVllJE7ns7Y=\");","map":{"version":3,"names":["useState","useCallback","complianceApi","useBlueprintAnalysis","_s","status","setStatus","progress","setProgress","result","setResult","error","setError","startAnalysis","file","progressInterval","setInterval","prev","data","analyzeBlueprint","clearInterval","setTimeout","err","message","resetAnalysis"],"sources":["/Users/anasuyabasu/projects/ocelot/ocelot-compliance-app/frontend/src/hooks/useBlueprintAnalysis.jsx"],"sourcesContent":["import { useState, useCallback } from 'react';\nimport { complianceApi } from '../services/complianceApi';\n\nexport const useBlueprintAnalysis = () => {\n  const [status, setStatus] = useState('idle'); // idle, analyzing, complete, error\n  const [progress, setProgress] = useState(0);\n  const [result, setResult] = useState(null);\n  const [error, setError] = useState(null);\n\n  const startAnalysis = useCallback(async (file) => {\n    setStatus('analyzing');\n    setProgress(0);\n    setError(null);\n\n    // 1. Start the UI Simulation (The visual candy)\n    const progressInterval = setInterval(() => {\n      setProgress((prev) => {\n        if (prev >= 90) return 90; // Stall at 90% until API finishes\n        return prev + 10;\n      });\n    }, 400);\n\n    try {\n      // 2. Make the actual API Call\n      const data = await complianceApi.analyzeBlueprint(file);\n      \n      // 3. When API finishes successfully:\n      clearInterval(progressInterval);\n      setProgress(100);\n      setResult(data);\n      \n      // Small delay to let the user see \"100%\" before switching screens\n      setTimeout(() => {\n        setStatus('complete');\n      }, 500);\n\n    } catch (err) {\n      clearInterval(progressInterval);\n      setError(err.message);\n      setStatus('error');\n    }\n  }, []);\n\n  const resetAnalysis = useCallback(() => {\n    setStatus('idle');\n    setProgress(0);\n    setResult(null);\n    setError(null);\n  }, []);\n\n  return {\n    status,\n    progress,\n    result,\n    error,\n    startAnalysis,\n    resetAnalysis\n  };\n};"],"mappings":";AAAA,SAASA,QAAQ,EAAEC,WAAW,QAAQ,OAAO;AAC7C,SAASC,aAAa,QAAQ,2BAA2B;AAEzD,OAAO,MAAMC,oBAAoB,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACxC,MAAM,CAACC,MAAM,EAAEC,SAAS,CAAC,GAAGN,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC;EAC9C,MAAM,CAACO,QAAQ,EAAEC,WAAW,CAAC,GAAGR,QAAQ,CAAC,CAAC,CAAC;EAC3C,MAAM,CAACS,MAAM,EAAEC,SAAS,CAAC,GAAGV,QAAQ,CAAC,IAAI,CAAC;EAC1C,MAAM,CAACW,KAAK,EAAEC,QAAQ,CAAC,GAAGZ,QAAQ,CAAC,IAAI,CAAC;EAExC,MAAMa,aAAa,GAAGZ,WAAW,CAAC,MAAOa,IAAI,IAAK;IAChDR,SAAS,CAAC,WAAW,CAAC;IACtBE,WAAW,CAAC,CAAC,CAAC;IACdI,QAAQ,CAAC,IAAI,CAAC;;IAEd;IACA,MAAMG,gBAAgB,GAAGC,WAAW,CAAC,MAAM;MACzCR,WAAW,CAAES,IAAI,IAAK;QACpB,IAAIA,IAAI,IAAI,EAAE,EAAE,OAAO,EAAE,CAAC,CAAC;QAC3B,OAAOA,IAAI,GAAG,EAAE;MAClB,CAAC,CAAC;IACJ,CAAC,EAAE,GAAG,CAAC;IAEP,IAAI;MACF;MACA,MAAMC,IAAI,GAAG,MAAMhB,aAAa,CAACiB,gBAAgB,CAACL,IAAI,CAAC;;MAEvD;MACAM,aAAa,CAACL,gBAAgB,CAAC;MAC/BP,WAAW,CAAC,GAAG,CAAC;MAChBE,SAAS,CAACQ,IAAI,CAAC;;MAEf;MACAG,UAAU,CAAC,MAAM;QACff,SAAS,CAAC,UAAU,CAAC;MACvB,CAAC,EAAE,GAAG,CAAC;IAET,CAAC,CAAC,OAAOgB,GAAG,EAAE;MACZF,aAAa,CAACL,gBAAgB,CAAC;MAC/BH,QAAQ,CAACU,GAAG,CAACC,OAAO,CAAC;MACrBjB,SAAS,CAAC,OAAO,CAAC;IACpB;EACF,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMkB,aAAa,GAAGvB,WAAW,CAAC,MAAM;IACtCK,SAAS,CAAC,MAAM,CAAC;IACjBE,WAAW,CAAC,CAAC,CAAC;IACdE,SAAS,CAAC,IAAI,CAAC;IACfE,QAAQ,CAAC,IAAI,CAAC;EAChB,CAAC,EAAE,EAAE,CAAC;EAEN,OAAO;IACLP,MAAM;IACNE,QAAQ;IACRE,MAAM;IACNE,KAAK;IACLE,aAAa;IACbW;EACF,CAAC;AACH,CAAC;AAACpB,EAAA,CAvDWD,oBAAoB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}